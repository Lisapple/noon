[gd_scene load_steps=5 format=2]

[sub_resource type="Shader" id=1]

code = "shader_type canvas_item;

void fragment() {
	COLOR = textureLod(SCREEN_TEXTURE, SCREEN_UV, 4.0);
	COLOR.a = 1.0;
}"

[sub_resource type="ShaderMaterial" id=2]

render_priority = 0
shader = SubResource( 1 )

[sub_resource type="Shader" id=3]

code = "shader_type canvas_item;

uniform sampler2D tex;
uniform sampler2D map;

void fragment() {
	float blur = abs(sin(TIME * 0.8));
	//COLOR = textureLod(SCREEN_TEXTURE, SCREEN_UV, 0.0);
	float dist = textureLod(map, UV, 0.6).r;
	float a = 0.3 + blur * 0.5, b = min(a * 1.4, 1.0);
	float factor = smoothstep(b, a, dist);
	COLOR = mix(texture(tex, UV), vec4(factor * (1.0 - blur)), pow(blur, 0.05));
	COLOR.a = 1.0;
}"

[sub_resource type="ShaderMaterial" id=4]

render_priority = 0
shader = SubResource( 3 )
_sections_unfolded = [ "shader_param" ]

[node name="Panel" type="Panel" index="0"]

material = SubResource( 2 )
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
_sections_unfolded = [ "Material" ]

[node name="Panel" type="Panel" parent="." index="0"]

material = SubResource( 4 )
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 52.0
margin_right = -91.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
_sections_unfolded = [ "Material", "Rect" ]

[node name="TextureRect" type="TextureRect" parent="." index="1"]

visible = false
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
expand = true
stretch_mode = 0


